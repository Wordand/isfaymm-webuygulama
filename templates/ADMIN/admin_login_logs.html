<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>GiriÅŸ LoglarÄ±</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- SweetAlert2 -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body class="p-4 bg-light">
  <div class="container">

    <!-- Ãœst BaÅŸlÄ±k ve Butonlar -->
    <div class="d-flex justify-content-between align-items-center mb-4">
      <h3 class="fw-bold mb-0">ğŸ” GiriÅŸ LoglarÄ±</h3>
      <div>
        <a href="{{ url_for('admin_users') }}" class="btn btn-secondary btn-sm">â† Geri DÃ¶n</a>

        <!-- ğŸ”´ SweetAlert ile TÃ¼m LoglarÄ± Sil Butonu -->
        <form id="deleteAllForm" method="POST" action="{{ url_for('delete_all_logs') }}" style="display:inline;">
          <button type="button" id="deleteAllBtn" class="btn btn-danger btn-sm ms-2">
            TÃ¼m LoglarÄ± Sil
          </button>
        </form>
      </div>
    </div>

    <!-- Log Tablosu -->
    <table class="table table-bordered table-striped bg-white align-middle">
      <thead class="table-primary text-center">
        <tr>
          <th>ID</th>
          <th>KullanÄ±cÄ±</th>
          <th>IP Adresi</th>
          <th>TarayÄ±cÄ±</th>
          <th>Tarih</th>
          <th>Durum</th>
        </tr>
      </thead>
      <tbody>
        {% for log in logs %}
        <tr>
          <td class="text-center">{{ log.id }}</td>
          <td>{{ log.username }}</td>
          <td>{{ log.ip_address }}</td>
          <td>{{ log.user_agent }}</td>
          <td>{{ log.login_time | safe_date }}</td>
          <td class="text-center">
            {% if log.success %}
              <span class="badge bg-success">BaÅŸarÄ±lÄ±</span>
            {% else %}
              <span class="badge bg-danger">BaÅŸarÄ±sÄ±z</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <!-- ğŸ§© SweetAlert2 Script -->
  <script>
    document.getElementById('deleteAllBtn').addEventListener('click', function () {
      Swal.fire({
        title: 'TÃ¼m loglarÄ± silmek istediÄŸinize emin misiniz?',
        text: 'Bu iÅŸlem geri alÄ±namaz!',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonText: 'Evet, sil',
        cancelButtonText: 'VazgeÃ§',
        confirmButtonColor: '#d33',
        cancelButtonColor: '#3085d6'
      }).then((result) => {
        if (result.isConfirmed) {
          document.getElementById('deleteAllForm').submit();
        }
      });
    });
  </script>

</body>
</html>
